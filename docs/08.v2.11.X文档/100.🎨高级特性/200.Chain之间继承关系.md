---
title: Chain之间继承关系
date: 2023-10-10 15:26:41
permalink: /pages/524c43/
---
LiteFlow从2.11.1版本起，支持Chain之间的继承关系，使得Chain之间可以进行继承和扩展。

### 使用方法
可以在某个chain中使用```extends```属性来指明该chain继承自哪个chain。在被继承的chain中，需要预留出一个或多个占位符，以便于子chain可以对其进行扩展；而在子chain中，需要对被继承的父chain中的所有占位符进行实现。

子chain中的实现可以是组件，可以是其他chain，但是需要注意的是，子chain中的实现必须要与父chain中的占位符类型一致，否则会抛出异常。子chain的实现中可以同样可以包含占位符，从而实现多级继承。


### 例子
下面是一个基本使用的例子:
``` xml
<chain id="base">
    THEN(a, b, {0}, {1})
</chain>

<chain id="implA" extends="base">
    {0}=IF(c, d, e);
    {1}=SWITCH(f).to(j,k);
</chain>
```
通过上述定义，实现了一个继承自base的implA,最终实现的implA流程如下
``` xml
<chain id="implA">
    THEN(a, b, IF(c, d, e), SWITCH(f).to(j,k))
</chain>
```

下面是一个多级继承的例子:
``` xml
    <chain id="base">
        THEN(a, b, {0}, {1})
    </chain>

    <chain id="base2" extends="base">
        {0}=THEN(a,b,{3});
        {1}=SWITCH(f).to({4},k);
    </chain>

    <chain id="implB" extends="base2">
        {3}=THEN(a,b);
        {4}=j;
    </chain>
```
在上面的定义中,base2继承自base,implB又继承自base2,最终实现的implB流程如下：
``` xml
    <chain id="implB" extends="base2">
        THEN(
            a, b,
            THEN(a, b,
                THEN(a,b)
            ),
            SWITCH(f).to(j,k) 
        );
    </chain>
```

### 注意事项
1. 在继承Chain和被继承Chain中需要使用形如{x}的占位符，其中x可以是以下两种形式之一：
    - 纯数字构成
    - 由字母、下划线以及数字构成，但是数字不能作为开头

    也就是说，形如{1}、{a}、{a1}、{a_1}都是合法的占位符，而{1a}、{1_a}、{a_1a}都是非法的占位符。
2. 在继承Chain和被继承Chain中的占位符，必须要在子Chain中进行实现，否则会抛出异常。